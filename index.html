<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Flashlight Game</title>
<style>
    html, body {
        margin: 0;
        padding: 0;
        background: black;
        overflow: hidden;
    }
    canvas {
        display: block;
    }
    #message {
        position: fixed;
        inset: 0;
        display: none;
        justify-content: center;
        align-items: center;
        background: rgba(0,0,0,0.9);
        color: white;
        font-size: 2.5rem;
        z-index: 10;
        text-align: center;
    }
</style>
</head>
<body>

<canvas id="game"></canvas>
<div id="message">ðŸ’– Now you're my valentine! ðŸ’–</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const message = document.getElementById("message");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// Bouquet image
const img = new Image();
img.src = "https://m.media-amazon.com/images/I/71dEnbFkofL._AC_UF894,1000_QL80_.jpg";

// Target
const target = {
    x: Math.random() * (canvas.width - 180),
    y: Math.random() * (canvas.height - 180),
    size: 180
};

// Mouse starts centered
let mouse = {
    x: canvas.width / 2,
    y: canvas.height / 2
};

window.addEventListener("mousemove", e => {
    mouse.x = e.clientX;
    mouse.y = e.clientY;
});

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // 1ï¸âƒ£ Draw full darkness
    ctx.fillStyle = "rgba(0,0,0,0.98)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // 2ï¸âƒ£ Create flashlight hole
    ctx.save();
    ctx.beginPath();
    ctx.arc(mouse.x, mouse.y, 120, 0, Math.PI * 2);
    ctx.clip();

    // 3ï¸âƒ£ Draw bouquet ONLY inside hole
    ctx.drawImage(img, target.x, target.y, target.size, target.size);

    ctx.restore();

    // 4ï¸âƒ£ Draw flashlight outline (visual feedback)
    ctx.beginPath();
    ctx.arc(mouse.x, mouse.y, 120, 0, Math.PI * 2);
    ctx.strokeStyle = "rgba(255,255,255,0.4)";
    ctx.lineWidth = 3;
    ctx.stroke();

    // Collision detection
    if (
        mouse.x > target.x &&
        mouse.x < target.x + target.size &&
        mouse.y > target.y &&
        mouse.y < target.y + target.size
    ) {
        message.style.display = "flex";
    }

    requestAnimationFrame(draw);
}

img.onload = draw;

window.addEventListener("resize", () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});
</script>

</body>
</html>
