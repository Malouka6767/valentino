<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Flashlight Test</title>
<style>
  body { margin:0; background:black; overflow:hidden; }
</style>
</head>
<body>

<canvas id="c"></canvas>

<script>
const c = document.getElementById("c");
const ctx = c.getContext("2d");
c.width = innerWidth;
c.height = innerHeight;

let mouse = { x: c.width/2, y: c.height/2 };
addEventListener("mousemove", e => {
  mouse.x = e.clientX;
  mouse.y = e.clientY;
});

function draw() {
  ctx.clearRect(0,0,c.width,c.height);

  // darkness
  ctx.fillStyle = "black";
  ctx.fillRect(0,0,c.width,c.height);

  // flashlight hole
  ctx.save();
  ctx.beginPath();
  ctx.arc(mouse.x, mouse.y, 120, 0, Math.PI*2);
  ctx.clip();

  // hidden object (RED BOX)
  ctx.fillStyle = "red";
  ctx.fillRect(400, 300, 200, 200);

  ctx.restore();

  requestAnimationFrame(draw);
}
draw();
</script>

</body>
</html>
